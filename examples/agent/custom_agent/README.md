# Custom Agent 示例

**难度等级**: 🔴 高级

本示例演示如何实现一个可以自动调用工具（如函数）的自定义智能体 `ToolCallAgent`。适合希望学习如何将外部工具集成到 AutoGen 智能体中的开发者。

**前置知识**:
- Python 类与继承
- BaseChatAgent 智能体基础
- 工具（Tool）机制

## 运行方式
```bash
uv run -m examples.agent.custom_agent.main
```

系统会自动调用自定义工具（如天气查询函数），并输出工具返回的结果。

## 概述
本示例通过继承 `BaseChatAgent`，实现了一个可以自动调用工具的智能体 `ToolCallAgent`。用户输入内容后，智能体会将输入作为参数传递给第一个工具，并将工具的执行结果作为回复返回。

## 系统架构

### 主要组件
- **ToolCallAgent**: 自定义智能体，自动调用工具并返回结果
- **get_weather**: 示例工具函数，根据城市名称返回天气信息

### 工作流程
1. **智能体初始化**: ToolCallAgent 注册工具
2. **消息处理**: 用户输入后，ToolCallAgent 自动调用第一个工具
3. **结果输出**: 工具执行结果作为智能体回复输出

## 组件详解

### ToolCallAgent 的作用
- 继承自 `BaseChatAgent`
- 支持注册多个工具（Tool），如函数或 BaseTool 实例
- 自动将用户输入作为参数传递给第一个工具，并异步获取结果
- 工具名称需唯一，避免冲突

### 工具注册与调用机制
- 支持直接传入函数或 BaseTool 实例
- 函数会被自动包装为 FunctionTool
- 工具调用时自动构造参数模型（如 ArgsModel）

### 执行逻辑
```
用户输入 → ToolCallAgent 自动调用第一个工具 → 输出工具结果
```

- **第一步**: 用户输入城市名称（如“北京”）
- **第二步**: ToolCallAgent 自动调用 get_weather 工具
- **第三步**: 工具返回天气信息，输出到终端

## 关键特性

- **自定义智能体**: 支持扩展和自定义消息处理逻辑
- **自动工具调用**: 无需手动选择，自动调用第一个工具
- **异步执行**: 支持异步工具和消息处理
- **类型安全**: 使用 Pydantic 模型自动校验参数

---

本示例为自定义智能体与工具集成提供了基础模板，适合扩展为更复杂的多工具、多参数智能